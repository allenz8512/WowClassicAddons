<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/">
    <Button name="AutoDismountFormCancel" inherits="SecureActionButtonTemplate" parent="UIParent" frameStrata="DIALOG">
        <Size x="128" y="128" />
        <Anchors>
            <Anchor point="BOTTOMLEFT" x="0" y="0" />
        </Anchors>
        <Attributes>
            <Attribute name="type" value="macro" />
            <Attribute name="macrotext" value="/cancelform" />
        </Attributes>
        
        <NormalTexture file="Interface\AddOns\AutoDismount\autodismounticon-normal"/>
        <PushedTexture file="Interface\AddOns\AutoDismount\autodismounticon-pressed"/>
        <HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD"/>

        <Scripts>
            <OnLoad>
                self:Hide();
                self:HookScript("OnClick", function() self:Hide() end);
            </OnLoad>
            <OnShow>
                self.timestamp = time();
            </OnShow>
            <OnUpdate>
                if (time() - self.timestamp > 30) then
                    self:Hide();
                end
            </OnUpdate>
        </Scripts>
    </Button>
   <Frame name="AutoDismountFrame">
        <Scripts>
            <OnLoad>
                print("auto dismount loaded: use /autodismountform to toggle enable / disable of form cancel button showing");
                self:RegisterEvent("UI_ERROR_MESSAGE");
                self:RegisterEvent("TAXIMAP_OPENED");
            </OnLoad>
            <OnEvent>
                if (event == "UI_ERROR_MESSAGE") then TryAndDismount(select(2,...), self); end
                if (event == "TAXIMAP_OPENED") then TryAndDismount(SPELL_FAILED_NOT_MOUNTED, self); end
            </OnEvent>
        </Scripts>
    </Frame>
</Ui>